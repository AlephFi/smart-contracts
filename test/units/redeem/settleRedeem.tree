SettleRedeem_Unit_Test
├── when caller is not ORACLE
│   └── it should revert with AccessControlUnauthorizedAccount
└── when caller is ORACLE
    ├── given settle redeem flow is paused
    │   └── it should revert with FlowIsCurrentlyPaused
    └── given settle redeem flow is unpaused
        ├── when redeemSettleId is equal to currentBatchId
        │   └── it should revert with NoRedeemsToSettle
        └── when redeemSettleId is less than currentBatchId
            ├── when lastFeePaidId is less than currentBatchId
            │   └── it should call _accumulateFees
            ├── when _sharesToSettle is 0
            │   └── it should update lastRedeemBatchId and not emit SettleRedeemBatch and update total assets and total shares
            └── when _sharesToSettle is greater than 0
                ├── given vault has insufficient balance
                │   └── it should revert with ERC20InsufficientBalance
                └── given vault has sufficient balance
                    └── it should transfer assets to users, emit SettleRedeemBatch per batch, update redeemSettleId, totalAssets and totalShares and emit SettleRedeem